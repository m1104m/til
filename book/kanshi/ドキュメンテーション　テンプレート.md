# ドキュメンテーション　テンプレート



## 1. 監視対象システムの概要

- いつ誰が利用するシステムか
- ユーザーにどのような価値を提供する為のシステムか
- ユーザーとしての利用方法(URLなど)



## 2. 監視テクノロジを導入する目的

- インシデント対応方針
- (決まっていれば) SLA/SLO/SLI



## 3. ステークホルダ

- 指名
- 所属
- 連絡先と連絡方法
- 担当内容と担当範囲



## 4. システム構成図

- 物理観点の構成

  - 電源やラックの配置、ネットワークの物理接続などを記載する
    - オンプレミスで環境では重要
    - ポートレベルではなく系統レベルでもよい
  - クラウドインフラの場合はリージョン・ゾーン配置なども記載する

- ネットワーク観点の構成

  - IPアドレスやサブネットなど

- アプリケーション観点の構成

  - ApacheやMySQLなどミドルウェアレベルでのデータのやりとりを可視化する

  - 外部システムとのやりとりも記載する

    - 図に書き切れない場合は別表にするなど工夫する

      

## 5. システム利用者から見たシステムの正しい状態や振る舞い

- システム利用者から見た正しい状態や振る舞いを確認し、確認ポイントと再現方法を記載
  - デザインなど流動的な項目を確認ポイントにしない
  - Webシステムの場合は参考として確認当時のスクリーンショットを貼ると良いが、スクリーンショットを都度更新することは手間の割にメリットがないのでやってはならない
  - 例：https://example.com/ にブラウザでアクセス→HTMLソースが最後の</html>まで読み込まれ、画面を最下部までスクロールしても表示にデザイン崩れと思われる箇所が見当たらない



## 6. 監視項目ごとの状況確認手順

- 監視項目ごとにリアルタイムなデータの確認方法や、同時に確認すべき項目・データを記載
  - 例：HTTP接続不可であれば、手動での接続方法、システム負荷の確認方法、ネットワーク接続状況の確認方法、ログの確認方法などを記載する
- オンコールレベルのアラート発報する可能性がある監視項目を全て記載
  - 記載できない監視項目はオンコールレベルのアラートを発報してはならない
- 監視システムの動作を再現することもあるが、同じ事象を別観点で確認するという視点が重要
  - 収集したメトリクスを確認することもあるが、よりリアルタイムで解像度が高い状況を確認するために、サーバにログインして状況を確認することもある
  - Linuxサーバであれば、w、top、dstat、iostat、ss、netstat、du、df、psなどのコマンドを利用して状況を確認する
- 同サーバ他メトリクスや同役割他サーバ同項目メトリクスを参照すべき場合はその旨を記載





## 7. 状況確認手順の結果をもとにした対応決定の判断基準

- 状況確認手順の実施結果をもとにして対応内容を決定するわけで、その判断基準を記載
  - 例：必要なプロセスが起動していない→該当プロセスの起動手順を実施する
  - 例：開発者用のOSユーザがログインし作業中→該当開発者にオンコールし意図した作業中か確認する



## 8. 作業実施手順

- 曖昧さのない具体的な作業手順
  - 曖昧さが小さいほうが望ましく、極力手作業を排するべき
- 作業手順だけでなく、作業環境へのログイン方法も記載
- 操作だけでなく、前後で実施すべく連絡なども記載